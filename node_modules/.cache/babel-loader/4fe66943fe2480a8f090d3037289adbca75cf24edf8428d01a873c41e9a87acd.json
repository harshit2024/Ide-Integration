{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toTreeSync = void 0;\nconst printTree_1 = require(\"json-joy/es6/util/print/printTree\");\nconst util_1 = require(\"../node-to-fsa/util\");\nconst toTreeSync = (fs, opts = {}) => {\n  var _a;\n  const separator = opts.separator || '/';\n  let dir = opts.dir || separator;\n  if (dir[dir.length - 1] !== separator) dir += separator;\n  const tab = opts.tab || '';\n  const depth = (_a = opts.depth) !== null && _a !== void 0 ? _a : 10;\n  let subtree = ' (...)';\n  if (depth > 0) {\n    const list = fs.readdirSync(dir, {\n      withFileTypes: true\n    });\n    subtree = (0, printTree_1.printTree)(tab, list.map(entry => tab => {\n      if (entry.isDirectory()) {\n        return (0, exports.toTreeSync)(fs, {\n          dir: dir + entry.name,\n          depth: depth - 1,\n          tab\n        });\n      } else if (entry.isSymbolicLink()) {\n        return '' + entry.name + ' â†’ ' + fs.readlinkSync(dir + entry.name);\n      } else {\n        return '' + entry.name;\n      }\n    }));\n  }\n  const base = (0, util_1.basename)(dir, separator) + separator;\n  return base + subtree;\n};\nexports.toTreeSync = toTreeSync;","map":{"version":3,"names":["printTree_1","require","util_1","toTreeSync","fs","opts","separator","dir","length","tab","depth","_a","subtree","list","readdirSync","withFileTypes","printTree","map","entry","isDirectory","exports","name","isSymbolicLink","readlinkSync","base","basename"],"sources":["../../src/print/index.ts"],"sourcesContent":[null],"mappings":";;;;;;AAAA,MAAAA,WAAA,GAAAC,OAAA;AACA,MAAAC,MAAA,GAAAD,OAAA;AAIO,MAAME,UAAU,GAAGA,CAACC,EAAoB,EAAEC,IAAA,GAAsB,EAAE,KAAI;;EAC3E,MAAMC,SAAS,GAAGD,IAAI,CAACC,SAAS,IAAI,GAAG;EACvC,IAAIC,GAAG,GAAGF,IAAI,CAACE,GAAG,IAAID,SAAS;EAC/B,IAAIC,GAAG,CAACA,GAAG,CAACC,MAAM,GAAG,CAAC,CAAC,KAAKF,SAAS,EAAEC,GAAG,IAAID,SAAS;EACvD,MAAMG,GAAG,GAAGJ,IAAI,CAACI,GAAG,IAAI,EAAE;EAC1B,MAAMC,KAAK,GAAG,CAAAC,EAAA,GAAAN,IAAI,CAACK,KAAK,cAAAC,EAAA,cAAAA,EAAA,GAAI,EAAE;EAC9B,IAAIC,OAAO,GAAG,QAAQ;EACtB,IAAIF,KAAK,GAAG,CAAC,EAAE;IACb,MAAMG,IAAI,GAAGT,EAAE,CAACU,WAAW,CAACP,GAAG,EAAE;MAAEQ,aAAa,EAAE;IAAI,CAAE,CAAc;IACtEH,OAAO,GAAG,IAAAZ,WAAA,CAAAgB,SAAS,EACjBP,GAAG,EACHI,IAAI,CAACI,GAAG,CAACC,KAAK,IAAIT,GAAG,IAAG;MACtB,IAAIS,KAAK,CAACC,WAAW,EAAE,EAAE;QACvB,OAAO,IAAAC,OAAA,CAAAjB,UAAU,EAACC,EAAE,EAAE;UAAEG,GAAG,EAAEA,GAAG,GAAGW,KAAK,CAACG,IAAI;UAAEX,KAAK,EAAEA,KAAK,GAAG,CAAC;UAAED;QAAG,CAAE,CAAC;OACxE,MAAM,IAAIS,KAAK,CAACI,cAAc,EAAE,EAAE;QACjC,OAAO,EAAE,GAAGJ,KAAK,CAACG,IAAI,GAAG,KAAK,GAAGjB,EAAE,CAACmB,YAAY,CAAChB,GAAG,GAAGW,KAAK,CAACG,IAAI,CAAC;OACnE,MAAM;QACL,OAAO,EAAE,GAAGH,KAAK,CAACG,IAAI;;IAE1B,CAAC,CAAC,CACH;;EAEH,MAAMG,IAAI,GAAG,IAAAtB,MAAA,CAAAuB,QAAQ,EAAClB,GAAG,EAAED,SAAS,CAAC,GAAGA,SAAS;EACjD,OAAOkB,IAAI,GAAGZ,OAAO;AACvB,CAAC;AAxBYQ,OAAA,CAAAjB,UAAU,GAAAA,UAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}